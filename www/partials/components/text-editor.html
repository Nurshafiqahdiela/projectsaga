<template>
    <div class="page">

        <div class="navbar">
            <div class="navbar-bg"></div>
            <div class="navbar-inner">
                <div class="left">
                    <a href="#" class="link back">
                        <i class="icon icon-back"></i>
                        <span class="if-not-md">Back</span>
                    </a>
                </div>
                <div class="title">Text Editor</div>
            </div>
        </div>

        <div class="page-content">

            <div class="row justify-content-center">
                <div class="col-100 medium-75 large-60 xlarge-50">

                    <div class="block block-strong inset margin-vertical">
                        <p>Text Editor is a feature-rich WYSIWYG editor used for editing content with formatting options.</p>
                    </div>

                    <div class="block-title margin-vertical">Default</div>
                    <div id="text-editor-default" class="text-editor inset margin-vertical">
                        <div class="text-editor-content" contenteditable></div>
                    </div>

                    <div class="block-title margin-vertical">With Value</div>
                    <div id="text-editor-with-value" class="text-editor text-editor-resizable inset margin-vertical">
                        <div class="text-editor-content" contenteditable>
                            <img src="https://picsum.photos/640/480?r=1" alt="" />
                            <h3>What is Lorem Ipsum?</h3>
                            <p>Lorem Ipsum is simply a dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
                        </div>
                    </div>

                    <div class="block-title margin-top">Specific Buttons</div>
                    <div class="block-header">It is possible to customize which buttons to show.</div>
                    <div id="text-editor-specific-buttons" class="text-editor inset margin-vertical">
                        <div class="text-editor-content" contenteditable></div>
                    </div>

                    <div class="block-title margin-top">Custom Buttons</div>
                    <div class="block-header">It is possible to create custom editor buttons. Here is the custom 'hr' button that adds horizontal rule.</div>
                    <div id="text-editor-custom-buttons" class="text-editor text-editor-resizable inset margin-vertical">
                        <div class="text-editor-content" contenteditable>
                            <h3>What is Lorem Ipsum?</h3>
                            <p>Lorem Ipsum is simply a dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
                            <hr/>
                            <h3>Where does it come from?</h3>
                            <p>Lorem Ipsum has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. It comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance.</p>
                            <hr/>
                            <h3>Why do we use it?</h3>
                            <p>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English.</p>
                        </div>
                    </div>

                    <div class="block-title margin-top">Popover Mode</div>
                    <div class="block-header">In this mode, there is no toolbar with buttons, instead they appear as popover when you select any text in editor.</div>
                    <div id="text-editor-mode-popover" class="text-editor inset margin-vertical">
                        <div class="text-editor-content" contenteditable></div>
                    </div>

                    <div class="block-title margin-top">Keyboard Toolbar Mode</div>
                    <div class="block-header">In this mode, toolbar with buttons will appear on top of virtual keyboard when editor is in focus. It is supported only in Cordova and Android Chrome. When not supported, it will fallback to popover mode.</div>
                    <div id="text-editor-mode-keyboard-toolbar" class="text-editor inset margin-vertical">
                        <div class="text-editor-content" contenteditable></div>
                    </div>

                    <div class="block-title margin-top">List Input</div>
                    <div class="block-header">Text Editor can be used in list with other inputs.</div>
                    <div class="list inset margin-vertical">
                        <ul>
                            <li>
                                <div class="item-content item-input">
                                    <div class="item-inner">
                                        <div class="item-title item-label">Name</div>
                                        <div class="item-input-wrap">
                                            <input type="text" />
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="item-content item-input">
                                    <div class="item-inner">
                                        <div class="item-title item-label">About</div>
                                        <div class="item-input-wrap">
                                            <div id="text-editor-list-input" class="text-editor">
                                                <div class="text-editor-content" contenteditable></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>

        </div>

    </div>
</template>

<script>
    export default function(props, {$, $el, $f7, $f7route, $f7router, $h, $on, $store, $theme, $update}) {

        let textEditorDefault = null;
        let textEditorWithValue = null;
        let textEditorSpecificButtons = null;
        let textEditorCustomButtons = null;
        let textEditorModePopover = null;
        let textEditorModeKeyboardToolbar = null;
        let textEditorListInput = null;

        let initializeTextEditorDefault = function() {
            textEditorDefault = $f7.textEditor.create({
                el: $el.value.find('#text-editor-default')
            });
        }

        let initializeTextEditorWithValue = function() {
            textEditorWithValue = $f7.textEditor.create({
                el: $el.value.find('#text-editor-with-value')
            });
        }

        let initializeTextEditorSpecificButtons = function() {
            textEditorSpecificButtons = $f7.textEditor.create({
                el: $el.value.find('#text-editor-specific-buttons'),
                buttons: [
                    ['bold', 'italic'],
                    ['underline', 'strikeThrough'],
                    ['orderedList', 'unorderedList']
                ]
            });
        }

        let initializeTextEditorCustomButtons = function() {
            textEditorCustomButtons = $f7.textEditor.create({
                el: $el.value.find('#text-editor-custom-buttons'),
                buttons: [
                    ['bold', 'italic'],
                    ['underline', 'strikeThrough'],
                    ['hr']
                ],
                customButtons: {
                    hr: {
                        content: 'hr',
                        onClick: function(editor, buttonEl) {
                            document.execCommand('insertHorizontalRule', false);
                        }
                    }
                }
            });
        }

        let initializeTextEditorModePopover = function() {
            textEditorModePopover = $f7.textEditor.create({
                el: $el.value.find('#text-editor-mode-popover'),
                buttons: [
                    ['bold', 'italic'],
                    ['underline', 'strikeThrough'],
                    ['orderedList', 'unorderedList']
                ],
                mode: 'popover'
            });
        }

        let initializeTextEditorModeKeyboardToolbar = function() {
            textEditorModeKeyboardToolbar = $f7.textEditor.create({
                el: $el.value.find('#text-editor-mode-keyboard-toolbar'),
                buttons: [
                    ['bold', 'italic'],
                    ['underline', 'strikeThrough'],
                    ['orderedList', 'unorderedList']
                ],
                mode: 'keyboard-toolbar'
            });
        }

        let initializeTextEditorListInput = function() {
            textEditorListInput = $f7.textEditor.create({
                el: $el.value.find('#text-editor-list-input'),
                placeholder: 'Write about yourself...',
                buttons: ['bold', 'italic', 'underline', 'strikeThrough'],
                mode: 'keyboard-toolbar'
            });
        }

        $on('pageBeforeIn', function() {
            initializeTextEditorDefault();
            initializeTextEditorWithValue();
            initializeTextEditorSpecificButtons();
            initializeTextEditorCustomButtons();
            initializeTextEditorModePopover();
            initializeTextEditorModeKeyboardToolbar();
            initializeTextEditorListInput();
        });

        return $render;
    }
</script>